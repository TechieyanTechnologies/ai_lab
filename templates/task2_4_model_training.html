<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 2.4: Model Training</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .task-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem 0; }
        .learning-objective { background: #f8f9fa; padding: 1rem; border-left: 4px solid #667eea; }
        .activity-card { background: #fff; border: 2px solid #667eea; border-radius: 8px; padding: 1.5rem; margin-bottom: 1rem; }
        .activity-card h6 { color: #667eea; font-weight: bold; }
        #trainingResult { min-height: 200px; background: white; border: 1px solid #dee2e6; padding: 1.5rem; }
        .algorithm-card { background: #f8f9fa; border-left: 4px solid #667eea; padding: 1rem; margin-bottom: 1rem; }
        .progress-card { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 8px; padding: 1rem; text-align: center; }
        .training-step { background: #fff; border: 2px solid #667eea; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; }
    </style>
</head>
<body>
    <div class="task-header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1><i class="fas fa-cogs me-3"></i>Task 2.4: Model Training</h1>
                    <p class="lead mb-0">Master the model training process</p>
                </div>
                <div class="text-end">
                    <a href="/level/2" class="btn btn-light me-2">‚Üê Back to Level 2</a>
                    <span class="badge bg-light text-dark me-2" style="font-size: 0.9rem;">
                        <i class="fas fa-clock me-1"></i>35 minutes
                    </span>
                    <a href="/level/2/task/4/document" target="_blank" class="btn btn-light btn-sm">
                        <i class="fas fa-book me-2"></i>Document
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="container py-4">
        <!-- Learning Objective -->
        <div class="learning-objective mb-4">
            <h4><i class="fas fa-bullseye me-2"></i>Learning Objective</h4>
            <p class="mb-0">Understand the complete model training process, learn different algorithms, master train-test split, cross-validation, and learn to monitor training progress.</p>
        </div>

        <!-- Dataset Selection -->
        <div class="card mb-4">
            <div class="card-header bg-secondary text-white">
                <h4><i class="fas fa-database me-2"></i>Select Your Dataset</h4>
            </div>
            <div class="card-body">
                <p>Choose a dataset for model training:</p>
                
                <!-- Upload Your Own Dataset -->
                <div class="mb-3">
                    <label class="form-label"><i class="fas fa-upload me-2"></i>Upload Your Own Dataset</label>
                    <div class="input-group">
                        <input type="file" class="form-control" id="csvFileInput" accept=".csv" onchange="handleFileUpload(event)">
                        <button class="btn btn-primary" onclick="document.getElementById('csvFileInput').click()">
                            <i class="fas fa-folder-open me-2"></i>Browse CSV Files
                        </button>
                    </div>
                    <small class="text-muted">Upload a CSV file for model training</small>
                </div>
                
                <hr class="my-4">
                
                <p class="mb-2">Or choose from sample datasets:</p>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-primary" onclick="loadSample('housing_small')">
                        <i class="fas fa-home me-2"></i>Housing Data
                    </button>
                    <button type="button" class="btn btn-outline-primary" onclick="loadSample('student_performance')">
                        <i class="fas fa-graduation-cap me-2"></i>Student Performance
                    </button>
                </div>
                <div id="datasetStatus" class="mt-3"></div>
                
                <!-- Data Preview Section -->
                <div id="dataPreview" class="mt-4" style="display: none;">
                    <h6><i class="fas fa-eye me-2"></i>Dataset Preview</h6>
                    <div id="dataInfo" class="alert alert-info mb-3"></div>
                    <div id="dataTable" class="table-responsive"></div>
                </div>
            </div>
        </div>

        <!-- Training Process -->
        <div class="card mb-4" id="trainingCard" style="display: none;">
            <div class="card-header bg-primary text-white">
                <h5><i class="fas fa-play me-2"></i>Model Training Process</h5>
            </div>
            <div class="card-body">
                <p class="mb-4">Follow the complete model training workflow:</p>
                
                <!-- Step 1: Choose Algorithm -->
                <div class="training-step">
                    <h6><i class="fas fa-brain me-2"></i>Step 1: Choose Algorithm</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="algorithm-card">
                                <h6>Regression Algorithms</h6>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="regressionAlgo" id="linearReg" value="linear">
                                    <label class="form-check-label" for="linearReg">Linear Regression</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="regressionAlgo" id="ridgeReg" value="ridge">
                                    <label class="form-check-label" for="ridgeReg">Ridge Regression</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="regressionAlgo" id="lassoReg" value="lasso">
                                    <label class="form-check-label" for="lassoReg">Lasso Regression</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="algorithm-card">
                                <h6>Classification Algorithms</h6>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="classificationAlgo" id="logisticReg" value="logistic">
                                    <label class="form-check-label" for="logisticReg">Logistic Regression</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="classificationAlgo" id="randomForest" value="randomforest">
                                    <label class="form-check-label" for="randomForest">Random Forest</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="classificationAlgo" id="svm" value="svm">
                                    <label class="form-check-label" for="svm">Support Vector Machine</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Configure Training -->
                <div class="training-step">
                    <h6><i class="fas fa-sliders-h me-2"></i>Step 2: Configure Training Parameters</h6>
                    <div class="row">
                        <div class="col-md-4">
                            <label class="form-label">Problem Type</label>
                            <select id="problemType" class="form-select">
                                <option value="">Select problem type...</option>
                                <option value="regression">Regression</option>
                                <option value="classification">Classification</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Test Size</label>
                            <select id="testSize" class="form-select">
                                <option value="0.2">20%</option>
                                <option value="0.3">30%</option>
                                <option value="0.1">10%</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Cross Validation</label>
                            <select id="cvFolds" class="form-select">
                                <option value="5">5-fold CV</option>
                                <option value="10">10-fold CV</option>
                                <option value="3">3-fold CV</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Select Features -->
                <div class="training-step">
                    <h6><i class="fas fa-puzzle-piece me-2"></i>Step 3: Select Features and Target</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Target Variable</label>
                            <select id="targetColumn" class="form-select">
                                <option value="">Choose target variable...</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Features</label>
                            <div id="featureCheckboxes" class="form-control" style="height: 120px; overflow-y: auto;">
                                <!-- Feature checkboxes will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Start Training -->
                <div class="training-step">
                    <h6><i class="fas fa-play-circle me-2"></i>Step 4: Start Training</h6>
                    <button onclick="startTraining()" class="btn btn-success btn-lg">
                        <i class="fas fa-play me-2"></i>Start Model Training
                    </button>
                </div>
                
                <div id="trainingResult" class="mt-4"></div>
            </div>
        </div>

        <!-- Training Progress -->
        <div class="card mb-4" id="progressCard" style="display: none;">
            <div class="card-header bg-info text-white">
                <h5><i class="fas fa-chart-line me-2"></i>Training Progress</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="progress-card">
                            <h6>Data Split</h6>
                            <h4 id="splitProgress">0%</h4>
                            <small>Train/Test Split</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="progress-card">
                            <h6>Preprocessing</h6>
                            <h4 id="preprocessProgress">0%</h4>
                            <small>Feature Engineering</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="progress-card">
                            <h6>Training</h6>
                            <h4 id="trainingProgress">0%</h4>
                            <small>Model Learning</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="progress-card">
                            <h6>Validation</h6>
                            <h4 id="validationProgress">0%</h4>
                            <small>Cross Validation</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Activities -->
        <div class="card mb-4" id="activitiesCard" style="display: none;">
            <div class="card-header bg-success text-white">
                <h5><i class="fas fa-hands-on me-2"></i>Hands-on Activities</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="activity-card">
                            <h6><i class="fas fa-chart-bar"></i> Compare Algorithms</h6>
                            <p class="small">Train multiple algorithms and compare their performance</p>
                            <button onclick="compareAlgorithms()" class="btn btn-success btn-sm w-100">Compare Models</button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="activity-card">
                            <h6><i class="fas fa-crosshairs"></i> Cross Validation</h6>
                            <p class="small">Perform k-fold cross validation for robust evaluation</p>
                            <button onclick="performCrossValidation()" class="btn btn-success btn-sm w-100">Run CV</button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="activity-card">
                            <h6><i class="fas fa-chart-line"></i> Learning Curves</h6>
                            <p class="small">Visualize how model performance changes with training size</p>
                            <button onclick="showLearningCurves()" class="btn btn-success btn-sm w-100">Show Curves</button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="activity-card">
                            <h6><i class="fas fa-save"></i> Save Training Results</h6>
                            <p class="small">Save your trained models and training history</p>
                            <button onclick="saveTrainingResults()" class="btn btn-success btn-sm w-100">Save Results</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="card">
            <div class="card-body text-center">
                <a href="/level/2/task/3" class="btn btn-outline-secondary me-2">
                    <i class="fas fa-arrow-left me-2"></i>Previous Task
                </a>
                <a href="/level/2/task/5" class="btn btn-primary">
                    Next Task <i class="fas fa-arrow-right ms-2"></i>
                </a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentProjectId = localStorage.getItem('currentProjectId');
        let trainingInProgress = false;

        // Load dataset if available
        if (currentProjectId) {
            document.getElementById('datasetStatus').innerHTML = '<div class="alert alert-success">Dataset loaded! Project ID: ' + currentProjectId + '</div>';
            document.getElementById('trainingCard').style.display = 'block';
            document.getElementById('activitiesCard').style.display = 'block';
            
            loadDatasetInfo();
        }

        async function loadDatasetInfo() {
            try {
                const response = await fetch(`/projects/${currentProjectId}/columns`);
                const data = await response.json();
                
                // Show data preview
                showDataPreview(data);
                
                // Populate target column dropdown
                const targetSelect = document.getElementById('targetColumn');
                targetSelect.innerHTML = '<option value="">Choose target variable...</option>';
                
                data.columns.forEach(col => {
                    const option = document.createElement('option');
                    option.value = col;
                    option.textContent = col;
                    targetSelect.appendChild(option);
                });
                
                // Populate feature checkboxes
                const featureDiv = document.getElementById('featureCheckboxes');
                featureDiv.innerHTML = '';
                
                data.columns.forEach(col => {
                    const div = document.createElement('div');
                    div.className = 'form-check';
                    div.innerHTML = `
                        <input class="form-check-input" type="checkbox" value="${col}" id="feature_${col}">
                        <label class="form-check-label" for="feature_${col}">
                            ${col}
                        </label>
                    `;
                    featureDiv.appendChild(div);
                });
                
                document.getElementById('datasetStatus').innerHTML = `<div class="alert alert-success"><i class="fas fa-check-circle me-2"></i>Dataset loaded: ${data.shape[0]} rows, ${data.shape[1]} columns</div>`;
            } catch (error) {
                console.error('Error loading dataset info:', error);
            }
        }

        async function showDataPreview(data) {
            // Show data info
            let infoHtml = `<h6>üìä Dataset Information:</h6>`;
            infoHtml += `<div class="row">`;
            infoHtml += `<div class="col-md-6">`;
            infoHtml += `<p><strong>Total Rows:</strong> ${data.shape[0]}</p>`;
            infoHtml += `<p><strong>Total Columns:</strong> ${data.shape[1]}</p>`;
            infoHtml += `</div>`;
            infoHtml += `<div class="col-md-6">`;
            infoHtml += `<p><strong>Numeric Columns:</strong> ${data.numeric_columns.length}</p>`;
            infoHtml += `<p><strong>Categorical Columns:</strong> ${data.columns.length - data.numeric_columns.length}</p>`;
            infoHtml += `</div>`;
            infoHtml += `</div>`;
            
            document.getElementById('dataInfo').innerHTML = infoHtml;
            
            // Show data table preview
            try {
                const previewResponse = await fetch(`/projects/${currentProjectId}/dataset/preview`);
                const previewData = await previewResponse.json();
                
                let tableHtml = `<table class="table table-sm table-striped">`;
                tableHtml += `<thead><tr>`;
                previewData.columns.forEach(col => {
                    const isNumeric = data.numeric_columns.includes(col);
                    const icon = isNumeric ? 'fas fa-calculator' : 'fas fa-tag';
                    tableHtml += `<th><i class="${icon} me-1"></i>${col}</th>`;
                });
                tableHtml += `</tr></thead><tbody>`;
                
                // Convert head data (list of objects) to array format
                previewData.head.slice(0, 10).forEach(row => {
                    tableHtml += `<tr>`;
                    previewData.columns.forEach(col => {
                        tableHtml += `<td>${row[col]}</td>`;
                    });
                    tableHtml += `</tr>`;
                });
                tableHtml += `</tbody></table>`;
                
                if (previewData.head.length > 10) {
                    tableHtml += `<p class="small text-muted">Showing first 10 rows of ${previewData.head.length} total rows</p>`;
                }
                
                document.getElementById('dataTable').innerHTML = tableHtml;
                document.getElementById('dataPreview').style.display = 'block';
            } catch (error) {
                console.error('Error loading data preview:', error);
            }
        }

        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            if (!file.name.endsWith('.csv')) {
                alert('Please upload a CSV file'); return;
            }

            document.getElementById('datasetStatus').innerHTML = '<div class="alert alert-info">Uploading... <i class="fas fa-spinner fa-spin"></i></div>';

            try {
                const formData = new FormData();
                formData.append('file', file);
                const response = await fetch('/level/2/upload', { method: 'POST', body: formData });

                if (!response.ok) throw new Error('Upload failed');
                const data = await response.json();

                if (data.project_id) {
                    currentProjectId = data.project_id;
                    localStorage.setItem('currentProjectId', currentProjectId);
                    document.getElementById('datasetStatus').innerHTML = `<div class="alert alert-success">Dataset uploaded! Project ID: ${currentProjectId}</div>`;
                    document.getElementById('trainingCard').style.display = 'block';
                    document.getElementById('activitiesCard').style.display = 'block';
                    
                    loadDatasetInfo();
                }
            } catch (error) {
                document.getElementById('datasetStatus').innerHTML = '<div class="alert alert-danger">Error: ' + error.message + '</div>';
            }
        }

        async function loadSample(filename) {
            if (!filename) { alert('Please select a dataset'); return; }

            try {
                const response = await fetch(`/level/2/load-sample/${filename}`, { method: 'POST' });
                const data = await response.json();

                if (data.project_id) {
                    currentProjectId = data.project_id;
                    localStorage.setItem('currentProjectId', currentProjectId);
                    document.getElementById('datasetStatus').innerHTML = `<div class="alert alert-success">Sample loaded! Project ID: ${currentProjectId}</div>`;
                    document.getElementById('trainingCard').style.display = 'block';
                    document.getElementById('activitiesCard').style.display = 'block';
                    
                    loadDatasetInfo();
                }
            } catch (error) {
                alert('Error loading sample: ' + error.message);
            }
        }

        async function startTraining() {
            if (!currentProjectId) { alert('Please load a dataset first!'); return; }
            if (trainingInProgress) { alert('Training already in progress!'); return; }
            
            const problemType = document.getElementById('problemType').value;
            if (!problemType) { alert('Please select a problem type!'); return; }
            
            const targetColumn = document.getElementById('targetColumn').value;
            if (!targetColumn) { alert('Please select a target variable!'); return; }
            
            const selectedFeatures = Array.from(document.querySelectorAll('#featureCheckboxes input:checked'))
                .map(cb => cb.value);
            
            if (selectedFeatures.length === 0) { alert('Please select at least one feature!'); return; }
            
            trainingInProgress = true;
            document.getElementById('progressCard').style.display = 'block';
            
            // Simulate training progress
            simulateTrainingProgress();
            
            try {
                let endpoint = problemType === 'regression' ? 'train-regression' : 'train-classification';
                const response = await fetch(`/projects/${currentProjectId}/${endpoint}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        target_column: targetColumn,
                        features: selectedFeatures
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    let html = '<h6><i class="fas fa-check-circle text-success me-2"></i>Training Complete!</h6>';
                    html += '<div class="alert alert-success">';
                    html += '<h6>üéâ Model Training Successful!</h6>';
                    html += `<p><strong>Problem Type:</strong> ${problemType.charAt(0).toUpperCase() + problemType.slice(1)}</p>`;
                    html += `<p><strong>Target Variable:</strong> ${targetColumn}</p>`;
                    html += `<p><strong>Features Used:</strong> ${selectedFeatures.join(', ')}</p>`;
                    html += '</div>';
                    
                    html += '<div class="alert alert-info">';
                    html += '<h6>üìä Training Results:</h6>';
                    if (problemType === 'regression') {
                        html += `<p><strong>R¬≤ Score:</strong> ${result.metrics.r2.toFixed(3)}</p>`;
                        html += `<p><strong>RMSE:</strong> ${result.metrics.rmse.toFixed(2)}</p>`;
                    } else {
                        html += `<p><strong>Accuracy:</strong> ${(result.metrics.accuracy * 100).toFixed(1)}%</p>`;
                    }
                    html += '</div>';
                    
                    if (result.plot_filename) {
                        const url = `/artifacts/projects/${currentProjectId}/runs/${result.plot_filename}`;
                        html += '<div class="alert alert-light">';
                        html += '<h6>üìà Visualization:</h6>';
                        html += `<img src="${url}" class="img-fluid border rounded">`;
                        html += '</div>';
                    }
                    
                    document.getElementById('trainingResult').innerHTML = html;
                } else {
                    document.getElementById('trainingResult').innerHTML = '<div class="alert alert-danger">Error: ' + result.error + '</div>';
                }
            } catch (error) {
                document.getElementById('trainingResult').innerHTML = '<div class="alert alert-danger">Error: ' + error.message + '</div>';
            } finally {
                trainingInProgress = false;
            }
        }

        function simulateTrainingProgress() {
            const steps = ['splitProgress', 'preprocessProgress', 'trainingProgress', 'validationProgress'];
            let currentStep = 0;
            
            const interval = setInterval(() => {
                if (currentStep < steps.length) {
                    const progressElement = document.getElementById(steps[currentStep]);
                    let progress = parseInt(progressElement.textContent);
                    
                    if (progress < 100) {
                        progress += Math.random() * 20;
                        if (progress > 100) progress = 100;
                        progressElement.textContent = Math.round(progress) + '%';
                    } else {
                        currentStep++;
                    }
                } else {
                    clearInterval(interval);
                }
            }, 200);
        }

        async function compareAlgorithms() {
            if (!currentProjectId) { alert('Please load a dataset first!'); return; }
            
            let html = '<h6><i class="fas fa-chart-bar text-success me-2"></i>Algorithm Comparison</h6>';
            html += '<div class="alert alert-success">';
            html += '<h6>üìä Algorithm Performance Comparison:</h6>';
            html += '<table class="table table-sm">';
            html += '<thead><tr><th>Algorithm</th><th>Accuracy/R¬≤</th><th>Training Time</th><th>Best For</th></tr></thead>';
            html += '<tbody>';
            html += '<tr><td>Linear Regression</td><td>0.85</td><td>0.1s</td><td>Linear relationships</td></tr>';
            html += '<tr><td>Ridge Regression</td><td>0.87</td><td>0.2s</td><td>Overfitting prevention</td></tr>';
            html += '<tr><td>Random Forest</td><td>0.89</td><td>1.5s</td><td>Non-linear patterns</td></tr>';
            html += '<tr><td>SVM</td><td>0.88</td><td>2.1s</td><td>High-dimensional data</td></tr>';
            html += '</tbody>';
            html += '</table>';
            html += '</div>';
            
            document.getElementById('trainingResult').innerHTML = html;
        }

        async function performCrossValidation() {
            if (!currentProjectId) { alert('Please load a dataset first!'); return; }
            
            let html = '<h6><i class="fas fa-crosshairs text-success me-2"></i>Cross Validation Results</h6>';
            html += '<div class="alert alert-info">';
            html += '<h6>üîÑ 5-Fold Cross Validation:</h6>';
            html += '<table class="table table-sm">';
            html += '<thead><tr><th>Fold</th><th>Train Score</th><th>Test Score</th><th>Difference</th></tr></thead>';
            html += '<tbody>';
            
            for (let i = 1; i <= 5; i++) {
                const trainScore = (0.85 + Math.random() * 0.1).toFixed(3);
                const testScore = (0.80 + Math.random() * 0.1).toFixed(3);
                const diff = (trainScore - testScore).toFixed(3);
                
                html += `<tr>`;
                html += `<td>Fold ${i}</td>`;
                html += `<td>${trainScore}</td>`;
                html += `<td>${testScore}</td>`;
                html += `<td>${diff}</td>`;
                html += `</tr>`;
            }
            
            html += '</tbody>';
            html += '</table>';
            html += '<p class="small"><strong>Mean CV Score:</strong> 0.84 ¬± 0.03</p>';
            html += '</div>';
            
            document.getElementById('trainingResult').innerHTML = html;
        }

        async function showLearningCurves() {
            if (!currentProjectId) { alert('Please load a dataset first!'); return; }
            
            let html = '<h6><i class="fas fa-chart-line text-success me-2"></i>Learning Curves Analysis</h6>';
            html += '<div class="alert alert-info">';
            html += '<h6>üìà Learning Curve Insights:</h6>';
            html += '<ul class="small">';
            html += '<li><strong>Training Score:</strong> Starts high, decreases slightly</li>';
            html += '<li><strong>Validation Score:</strong> Starts low, increases with more data</li>';
            html += '<li><strong>Gap:</strong> Indicates overfitting if large</li>';
            html += '<li><strong>Convergence:</strong> Both curves should stabilize</li>';
            html += '</ul>';
            html += '</div>';
            
            html += '<div class="alert alert-warning">';
            html += '<h6>üí° Interpretation:</h6>';
            html += '<p class="small">Your model shows good learning behavior. The training and validation scores are converging, indicating the model is learning effectively without overfitting.</p>';
            html += '</div>';
            
            document.getElementById('trainingResult').innerHTML = html;
        }

        async function saveTrainingResults() {
            if (!currentProjectId) { alert('Please load a dataset first!'); return; }
            
            let html = '<h6><i class="fas fa-save text-success me-2"></i>Training Results Saved!</h6>';
            html += '<div class="alert alert-success">';
            html += '<h6>üíæ Saved Files:</h6>';
            html += '<ul class="small">';
            html += '<li><strong>Model:</strong> trained_model.pkl</li>';
            html += '<li><strong>Metrics:</strong> training_metrics.json</li>';
            html += '<li><strong>Plots:</strong> training_plots.png</li>';
            html += '<li><strong>Log:</strong> training_log.txt</li>';
            html += '</ul>';
            html += '</div>';
            
            document.getElementById('trainingResult').innerHTML = html;
        }
    </script>
</body>
</html>
